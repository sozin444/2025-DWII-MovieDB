{% from 'bootstrap5/utils.html' import render_icon %}

<!-- Estatísticas de avaliação -->
<div class="card bg-light mb-4">
    <div class="card-body">
        {% if estatisticas.total_avaliacoes > 0 %}
            <div class="row text-center">
                <div class="col-md-4">
                    <div class="mb-2">
                        <span class="text-warning" style="font-size: 2rem;">
                            {{ render_icon('star-fill') }}
                        </span>
                    </div>
                    <h4 class="text-primary mb-1">{{ "%.1f"|format(estatisticas.nota_media) }}</h4>
                    <small class="text-muted">Nota Média</small>
                </div>
                
                <div class="col-md-4">
                    <div class="mb-2">
                        <span class="text-info" style="font-size: 2rem;">
                            {{ render_icon('people-fill') }}
                        </span>
                    </div>
                    <h4 class="text-primary mb-1">{{ estatisticas.total_avaliacoes }}</h4>
                    <small class="text-muted">
                        {% if estatisticas.total_avaliacoes == 1 %}
                            Avaliação
                        {% else %}
                            Avaliações
                        {% endif %}
                    </small>
                </div>
                
                <div class="col-md-4">
                    <div class="mb-2">
                        <span class="text-success" style="font-size: 2rem;">
                            {{ render_icon('hand-thumbs-up-fill') }}
                        </span>
                    </div>
                    <h4 class="text-primary mb-1">{{ "%.0f"|format(estatisticas.percentual_recomendacoes) }}%</h4>
                    <small class="text-muted">Recomendam</small>
                </div>
            </div>
            
            <!-- Barra de progresso para recomendações -->
            <div class="mt-3">
                <div class="d-flex justify-content-between align-items-center mb-1">
                    <small class="text-muted">Recomendações</small>
                    <small class="text-muted">{{ estatisticas.total_recomendacoes }} de {{ estatisticas.total_avaliacoes }}</small>
                </div>
                <div class="progress" style="height: 8px;">
                    <div class="progress-bar bg-success" 
                         role="progressbar" 
                         style="width: {{ estatisticas.percentual_recomendacoes }}%"
                         aria-valuenow="{{ estatisticas.percentual_recomendacoes }}" 
                         aria-valuemin="0" 
                         aria-valuemax="100">
                    </div>
                </div>
            </div>
        {% else %}
            <div class="text-center text-muted">
                <div class="mb-3" style="font-size: 2rem;">
                    {{ render_icon('star') }}
                </div>
                <p class="mb-0">Sem avaliações</p>
                <small>Este filme ainda não foi avaliado</small>
            </div>
        {% endif %}
    </div>
</div>
